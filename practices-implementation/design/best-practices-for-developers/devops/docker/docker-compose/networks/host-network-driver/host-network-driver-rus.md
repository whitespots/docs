# Host network driver \(rus\)

### Введение

`host`: Устраняет изоляцию между docker-хостом и контейнером, чтобы контейнер мог использовать сеть хоста напрямую. Дополнительная информация содержится на [странице](https://docs.docker.com/network/host/) документации Docker.

{% hint style="info" %}
**Host network** используются в случае, когда сетевой стек не должен быть изолирован от docker-хоста, но остальные аспекты контейнера необходимо изолировать.
{% endhint %}

Эта инструкция покажет, как запустить контейнер `nginx`, который привязывается напрямую к порту 80 docker-хоста. С точки зрения сетей, таким образом достигается такой же уровень изоляции, как если бы `nginx` был запущен на хосте, а не в контейнере. С другой стороны, хранилище, пространства имен процессов и пользовательские пространства имен изолированы от docker-хоста. 

### Требования <a id="prerequisites"></a>

* Для выполнения инструкции требуется, чтобы 80-й порт был доступен на хосте. Чтобы изменить порт, который будет слушать `nginx`, обратитесь [документации образа ](https://hub.docker.com/_/nginx/)`nginx`.
* Драйвер `host` поддерживается только на Linux системах, он не работает на Windows, Mac. 

### Создаем контейнер 

Создайте файл `docker-compose.yml` и в нем укажите следующее:

```text
version: "3.3"

services:
  nginx:
    image: nginx
    network_mode: "host"
```

Сохраните файл и запустите команду  `docker-compose up -d`

Теперь можно проверить, что контейнер работает, перейдя по ссылке [http://localhost:80/.](http://localhost:80/.)

**Проверьте какой процесс привязан к порту 80** используя команду `netstat`. Необходимо использовать `sudo` because, так как процесс занят docker-демоном. 

```text
sudo netstat -tulpn | grep :80
```

Результат следующий: 

```text
root@ubuntu1-VirtualBox:~# sudo netstat -tulpn | grep :80
tcp   0    0 0.0.0.0:80      0.0.0.0:*   LISTEN      4027/nginx: master  
tcp6  0    0 :::80           :::*        LISTEN      4027/nginx: master  
tcp6  0    0 :::8001         :::*        LISTEN      1110/docker-proxy 
```



